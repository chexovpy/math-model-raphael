<!DOCTYPE html>
<html>
<head>
    <script src="{{ url_for('static', filename='jquery.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='raphael-min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static',filename='g.raphael-min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static',filename='g.bar-min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static',filename='g.dot-min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static',filename='g.line-min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static',filename='g.pie-min.js') }}" type="text/javascript"></script>
    <title>Пример javascript</title>
    <style type="text/css">
        body {
            background: #cccfd4;
        }
    </style>
</head>
<body>
<div id="main">
</div>
</body>
</html>

<script>

    $.ajax({
        type    :   'POST',
        url     :   '/graph.json',
        data    :   {
            x   :   "[1,2,3,4,5,6,7,8,9,10,11,12]",
            y   :   "[2,5,14,16,21,23,25,31,34,41,49,44]",
            n   :   "10"
        },
        success: function(data) {
            if (data['result'] !== 'ok') {
            } else {
                var m = $("#main");
                m.append(data['func'] + "<br>" + "<p>r = " + data['rec'] + "</p>");
                var paper = Raphael(40, 100, 640, 480);
                var y = [];
                var yyy = [2, 5, 14, 16, 21, 23, 25, 31, 34, 41, 49, 44];
                var xxx = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
                for (var x in xxx) {
                    y.push(data['b0'] + xxx[x] * data['b1']);
                }
                paper.linechart(40, 70, 250, 250, xxx, y, {
                    smooth:false,
                    symbol:'circle',
                    gutter:-40
                });
                paper.linechart(40, 70, 250, 250, xxx, yyy, {
                    smooth:true,
                    colors:['#F00'],
                    symbol:'circle',
                    nostroke:true,
                    gutter:-40
                });

                c = elementCircle(paper,10,10,10);
            }
        }
    });

    function elementCircle(paper,x,y,r){
        var rex = paper.circle(x, y, r).attr("fill", "#F00");
        var start = function () {
                    this.odx = 0;
                    this.ody = 0;
                    this.animate({"fill-opacity":0.2}, 500);
                },
                move = function (dx, dy) {
                    this.translate(dx - this.odx, dy - this.ody);
                    this.odx = dx;
                    this.ody = dy;
                },
                up = function () {
                    this.animate({"fill-opacity":1}, 500);
                };

        rex.drag(move, start, up);
        return rex;

    }


</script>